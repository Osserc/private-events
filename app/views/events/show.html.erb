<div class="events-show white">
  <%= render @event %>
  
  <% if user_signed_in? && current_user.id == @event.user.id %>
    <div class="user-actions">
      <div><button><%= link_to "Edit", edit_event_path(@event) %></button></div>
      <div><%= button_to "Delete", @event, method: :delete %></div>
    </div>
  <% end %>

</div>

<div class="attendees-bloc">
    <div class="events-header white">Attendee list</div>
  
    <%= render "participations/attendees", :list => @event.attendees %>
</div>

<div class="inviting">
  <%= form_with url: generate_invite_list_path do | f | %>
  <% list = (User.all.to_a - [User.find(@event.user_id)]).sort %>
  <%= f.hidden_field :event, :value => @event.id %>
  <%= f.hidden_field :path, :value => request.path %>

  <%= f.collection_check_boxes :invitees, list, :id, :username, { :item_wrapper_class => "invitee-choice" } do | single | %>
  
    <div class="single-invitee">
      <div><%= single.label %></div>
      <% if @event.invitees.include?(single.object) %>
        <div><%= single.check_box({ checked: true }) %></div>
      <% else %>
        <div><%= single.check_box({ checked: false }) %></div>
      <% end %>
    </div>
  
  <% end %>
  <%= f.submit "Invite" %>
  <% end %>
</div>